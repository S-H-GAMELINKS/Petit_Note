<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="index.css">

<?php if($set_nsfw && !$nsfwc):?>
	<!-- センシティブコンテンツにブラーをかける -->
<style>img {filter:blur(6px);}</style>
<?php endif;?>

<title><?=h($boardname)?></title>
</head>
<body>

<div class="container" id="top">

<?php if($set_nsfw && !$nsfwc):?>
	<h2>年齢制限付きのコンテンツを表示してもよろしいでしょうか?</h2>
	<form action="./" method="post">
	<input type="hidden" name="mode" value="view_nsfw">
	<input type="hidden" name="view_nsfw" value="on">
	<input type="hidden" name="catalogpage" value="<?=h($page)?>">
	<input type="submit" value="はい表示します。">
</form>
<?php endif;?>

<h1 class="title"><a href="./"><?=h($boardname)?></a></h1>
<nav class="memu_wrap_catalog" >
 <a href="#bottom">▽</a>
</nav>
<hr>
<div class="catalog_desc_wrap">
	<!-- 親のループ -->
<?php if(isset($out)):?>
<?php foreach($out as  $ress):?>
	<?php foreach($ress as  $res):?>
	<div class="catalog_image">			
		<?php if($res['img']):?>
			<a href="./?resno=<?= h($res['no'])?>" target="_blank">
			<?php if($res['thumbnail']):?>
				
					<img src="thumbnail/<?=h($res['thumbnail'])?>" alt="" width="<?=h($res['w'])?>" height="<?=h($res['h'])?>" loading="lazy">
				
			<?php else:?>
			<img src="src/<?=h($res['img'])?>" alt="" width="<?=h($res['w'])?>" height="<?=h($res['h'])?>" loading="lazy">
			<?php endif;?>
			</a>
			<?php else:?>
				<a href="./?resno=<?= h($res['no'])?>" target="_blank">画像なし</a>
		<?php endif;?>
	</div>
	
	<?php endforeach; ?>
	<?php endforeach; ?>
	<div class="catalog_pagetop"><a href="#top">△</a></div>
</div>


<hr>

<?php endif;?>
<?php
//ページング
$start_page=$page-$pagedef*8;
if($page<$pagedef*17){
	$start_page=0;
}
$end_page=$page+($pagedef*8)	;
if($page<$pagedef*17){
	$end_page=$pagedef*17;
}
//prev next 
$next=(($page+$pagedef)<$count_alllog) ? $page+$pagedef : false;//ページ番号がmaxを超える時はnextのリンクを出さない
$prev=((int)$page!==0) ? ($page-$pagedef) : false;//ページ番号が0の時はprevのリンクを出さない
?>
	<?php if($prev!==false):?>
		<a href="?mode=catalog&page=<?=h($prev)?>">≪prev</a>
	<?php endif;?>
	|  
	<?php if($next):?>
		<a href="?mode=catalog&page=<?=h($next)?>">next≫</a>
	<?php endif;?>

<?php for($i = 0; $i < $count_alllog ; $i+=$pagedef) :?>
<?php if(($i>=$start_page)&&($i<=$end_page)):?>
	<?php if($page==$i):?>
			[<?=h($i/$pagedef)?>]
		<?php else: ?>
			<?php if($i==0):?>
				[<a href="?mode=catalog&page=0">0</a>]
			<?php else:?>	
			<?php if($i === $end_page):?>
			<!-- 特定のページに代入される記号 エンド -->
				[<a href="?mode=catalog&page=<?=h($i)?>">≫</a>]
				<?php elseif($i === $start_page):?>
				[<a href="?mode=catalog&page=<?=h($i)?>">≪</a>]
					<?php else:?>
			[<a href="?mode=catalog&page=<?=h($i)?>"><?=h($i/$pagedef)?></a>]
			<?php endif;?>
			<?php endif;?>
		<?php endif;?>
	<?php endif;?>
<?php endfor ;?>

<div class="copy">
	<div class="left_wrap">
		[<a href="<?=h($home)?>">HOME</a>]
	</div>
	<div class="righit_wrap">
	<a href="https://github.com/satopian/Petit_Note" target="_blank" rel="rel="noopener">Petit Note</a> <span title="<?=h($petit_lot)?>"><?=h($petit_ver)?></span> <span>Web Style by BASIC</span><br>
	<span>OekakiApp - </span><span></span><a href="http://github.com/funige/neo/" target="_blank" rel="noopener noreferrer" title="by funige">PaintBBS NEO</a> , <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener noreferrer" title="by Nicholas Sherlock">ChickenPaint</a></span>
	<br>
	<span>UseFunction - <span title="by WonderCatStudio">DynamicPalette</span></span>
	<!--http://wondercatstudio.com/-->
	</div>
</div>
</div>
<div id="bottom"></div>
</body>
</html>
